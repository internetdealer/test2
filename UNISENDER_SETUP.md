# Инструкция по настройке Unisender для формы обратной связи

## Что нужно сделать на платформе Unisender

### 1. Зарегистрируйтесь или войдите в Unisender

Перейдите на [unisender.com](https://www.unisender.com) и войдите в свой аккаунт (или создайте новый).

### 2. Получите API ключ

1. Войдите в личный кабинет Unisender
2. Перейдите в **Настройки** → **API**
3. Скопируйте ваш **API ключ** (выглядит как длинная строка символов)
4. Сохраните его — он понадобится для настройки Netlify

**Важно:** API ключ не должен быть виден в коде сайта или передаваться третьим лицам.

### 3. Добавьте и подтвердите отправителя (Sender)

1. Перейдите в **Настройки** → **Отправители** (или **Senders**)
2. Нажмите **Добавить отправителя**
3. Введите:
   - **Email адрес**: адрес, с которого будут отправляться заявки (например, `noreply@yourdomain.com`)
   - **Имя отправителя**: например, "Заявка с сайта" или название вашей компании
4. Подтвердите email адрес:
   - Unisender отправит письмо с кодом подтверждения на указанный адрес
   - Введите код подтверждения или перейдите по ссылке из письма
   - Если используете свой домен, может потребоваться настройка SPF/DKIM записей в DNS

### 4. Проверьте лимиты

Убедитесь, что у вас достаточно лимитов для отправки email:
- На бесплатном тарифе обычно есть ограниченное количество писем
- Для транзакционных писем (заявки) обычно используются отдельные лимиты

## Настройка переменных окружения в Netlify

После деплоя сайта на Netlify:

1. Откройте ваш сайт в Netlify Dashboard
2. Перейдите в **Site settings** → **Environment variables**
3. Добавьте следующие переменные:

```
UNISENDER_API_KEY=ваш_api_ключ_из_unisender
UNISENDER_SENDER_EMAIL=email_который_вы_подтвердили_в_unisender
UNISENDER_SENDER_NAME=Заявка с сайта
```

4. Нажмите **Save**

### Пример значений:

```
UNISENDER_API_KEY=6a7b8c9d0e1f2g3h4i5j6k7l8m9n0o1p2q3r4s5t6u7v8w9x0y1z2
UNISENDER_SENDER_EMAIL=noreply@yourdomain.com
UNISENDER_SENDER_NAME=Заявка с сайта
```

## Как это работает

1. Пользователь заполняет форму на сайте и нажимает "Отправить заявку"
2. Данные отправляются на Netlify Function (`/.netlify/functions/submit-contact`)
3. Функция использует ваш API ключ для отправки email через Unisender
4. Письмо с данными заявки приходит на адрес: **internetdealerr@gmail.com**

## Тестирование

После настройки:

1. Заполните форму на сайте
2. Проверьте почту **internetdealerr@gmail.com** — должно прийти письмо с заявкой
3. Если письмо не пришло:
   - Проверьте переменные окружения в Netlify
   - Проверьте логи функции в Netlify Dashboard → Functions → submit-contact
   - Убедитесь, что отправитель подтвержден в Unisender
   - Проверьте лимиты в Unisender

## Дополнительная информация

- [Документация Unisender API](https://www.unisender.com/ru/support/api/common/bulk-email/)
- [Метод sendEmail](https://www.unisender.com/ru/support/api/common/send-email/)
